{% extends "base.html" %}
{% block content %}

<div class="max-w-4xl mx-auto bg-white shadow p-6 rounded-lg">

  <h1 class="text-2xl font-bold mb-4">Meu Perfil</h1>

  <div class="mb-6">
    <p><strong>Nome:</strong> {{ usuario.nome }}</p>
    <p><strong>Email:</strong> {{ usuario.email }}</p>
    <p><strong>Telefone:</strong> {{ usuario.telefone }}</p>
    <p><strong>Admin:</strong> {{ usuario.is_admin }}</p>
  </div>

  <div class="flex gap-4 mb-8">
    <a href="{% url 'mudar_senha' %}"
       class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded">
       Alterar Senha
    </a>

    <form method="POST" action="{% url 'deletar_conta' %}">
      {% csrf_token %}
      <button type="submit"
              class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded">
        Deletar Conta
      </button>
    </form>
  </div>

  <h2 class="text-xl font-semibold mb-4">Meus Pedidos</h2>

  {% if pedidos %}
    <table class="w-full border">
      <thead class="bg-gray-100">
        <tr>
          <th class="p-2 border">ID</th>
          <th class="p-2 border">Data</th>
          <th class="p-2 border">Status</th>
          <th class="p-2 border">Total</th>
        </tr>
      </thead>
      <tbody>
        {% for pedido in pedidos %}
        <tr>
          <td class="border p-2">{{ pedido.id }}</td>
          <td class="border p-2">{{ pedido.data_pedido }}</td>
          <td class="border p-2">{{ pedido.status }}</td>
          <td class="border p-2">R$ {{ pedido.pagamento.valor }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p class="text-gray-600">Você ainda não fez pedidos.</p>
  {% endif %}
</div>

{% endblock %}
